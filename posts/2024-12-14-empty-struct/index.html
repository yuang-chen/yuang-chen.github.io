<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Empty Struct | Yac's Log</title><meta name=keywords content="C++,Alignment"><meta name=description content="Definition of an Empty Class An empty class is a class that:
Contains no non-static data members. May include: Member functions (including operator() or constructors), but these do not contribute to the class size. Static data members, because these are shared across all instances and are not part of the object layout. Does not use virtual functions or polymorphism, which would require the inclusion of a vtable pointer. Inherits from another empty class, as the derived class can still remain empty due to Empty Base Optimization (EBO)."><meta name=author content="Me"><link rel=canonical href=https://yuang-chen.github.io/posts/2024-12-14-empty-struct/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yuang-chen.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yuang-chen.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yuang-chen.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://yuang-chen.github.io/favicon/apple-touch-icon.ico><link rel=mask-icon href=https://yuang-chen.github.io/favicon/favicon-32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css integrity=sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js integrity=sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Empty Struct"><meta property="og:description" content="Definition of an Empty Class An empty class is a class that:
Contains no non-static data members. May include: Member functions (including operator() or constructors), but these do not contribute to the class size. Static data members, because these are shared across all instances and are not part of the object layout. Does not use virtual functions or polymorphism, which would require the inclusion of a vtable pointer. Inherits from another empty class, as the derived class can still remain empty due to Empty Base Optimization (EBO)."><meta property="og:type" content="article"><meta property="og:url" content="https://yuang-chen.github.io/posts/2024-12-14-empty-struct/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-14T10:08:30+08:00"><meta property="article:modified_time" content="2024-12-14T10:08:30+08:00"><meta property="og:site_name" content="Yac's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Empty Struct"><meta name=twitter:description content="Definition of an Empty Class An empty class is a class that:
Contains no non-static data members. May include: Member functions (including operator() or constructors), but these do not contribute to the class size. Static data members, because these are shared across all instances and are not part of the object layout. Does not use virtual functions or polymorphism, which would require the inclusion of a vtable pointer. Inherits from another empty class, as the derived class can still remain empty due to Empty Base Optimization (EBO)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://yuang-chen.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Empty Struct","item":"https://yuang-chen.github.io/posts/2024-12-14-empty-struct/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Empty Struct","name":"Empty Struct","description":"Definition of an Empty Class An empty class is a class that:\nContains no non-static data members. May include: Member functions (including operator() or constructors), but these do not contribute to the class size. Static data members, because these are shared across all instances and are not part of the object layout. Does not use virtual functions or polymorphism, which would require the inclusion of a vtable pointer. Inherits from another empty class, as the derived class can still remain empty due to Empty Base Optimization (EBO).","keywords":["C++","Alignment"],"articleBody":"Definition of an Empty Class An empty class is a class that:\nContains no non-static data members. May include: Member functions (including operator() or constructors), but these do not contribute to the class size. Static data members, because these are shared across all instances and are not part of the object layout. Does not use virtual functions or polymorphism, which would require the inclusion of a vtable pointer. Inherits from another empty class, as the derived class can still remain empty due to Empty Base Optimization (EBO). Code Example for Empty Class struct Empty {}; struct StillEmpty { static int counter; static void func() {} }; struct DerivedFromEmpty : Empty {}; Code Example for Non-Empty Class struct NonEmptyWithData { int x; }; struct NonEmptyWithVirtualFunction { virtual void func() {} }; struct Base { int x; }; struct NonEmptyWithBase : Base {}; Size of Empty Struct In C++, an empty struct has a size of 1 byte. This is due to the C++ standard requirement that no two distinct objects can have the same memory address, so even empty structures must have a non-zero size.\nThe minimum addressable unit in most computer architectures is 1 byte So while it might seem logical to make it 0 bytes since it contains no data, that would violate the requirement that objects must have unique addresses. And while 4 bytes would work, 1 byte is sufficient to satisfy the unique address requirement while minimizing wasted space.\nEmpty Base Optimization When an empty struct/class is used as a base class, it can be optimized away through Empty Base Optimization (EBO) When an empty struct is part of another struct/class, it will still contribute to padding and alignment Code Example #include struct Empty {}; // size: 1 byte // Empty Base Optimization struct DerivedFromEmpty : Empty { int x; // size: 4 bytes }; // sizeof(DerivedFromEmpty) == sizeof(int) // No EBO - empty struct as member struct ContainsEmpty { Empty e; // size: 1 byte int x; // size: 4 bytes }; // total size: 8 bytes // | e | pad pad pad | x x x x | // ^ ^ ^ // byte 0 byte 4 // 1 byte 4 bytes // + 3 bytes padding // = 8 bytes total int main() { std::cout \u003c\u003c \"Size of Empty: \" \u003c\u003c sizeof(Empty) \u003c\u003c std::endl; // 1 byte std::cout \u003c\u003c \"Size of DerivedFromEmpty: \" \u003c\u003c sizeof(DerivedFromEmpty) \u003c\u003c std::endl; // 4 bytes std::cout \u003c\u003c \"Size of ContainsEmpty: \" \u003c\u003c sizeof(ContainsEmpty) \u003c\u003c std::endl; // 8 bytes return 0; } It turns out that I have extensively used empty structs in my codebase, such as tags (e.g., host, device), functors (and lambdas) with no captures. These are termed as stateless types in the C++ standard to emphasize the functional behaviors, broader applications, and modern semantics. Notice that empty struct and stateless type are not strictly interchangeable, but in many cases, the stateless type is an empty struct that can be optimized with EBO. A separate post is dedicated to stateless types.\n","wordCount":"505","inLanguage":"en","datePublished":"2024-12-14T10:08:30+08:00","dateModified":"2024-12-14T10:08:30+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yuang-chen.github.io/posts/2024-12-14-empty-struct/"},"publisher":{"@type":"Organization","name":"Yac's Log","logo":{"@type":"ImageObject","url":"https://yuang-chen.github.io/favicon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yuang-chen.github.io/ accesskey=h title="Yac's Log (Alt + H)"><img src=https://yuang-chen.github.io/facebook alt aria-label=logo height=35>Yac's Log</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yuang-chen.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://yuang-chen.github.io/archives title=Archives><span>Archives</span></a></li><li><a href=https://yuang-chen.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yuang-chen.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://yuang-chen.github.io/about/aboutme title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Empty Struct</h1><div class=post-meta><span title='2024-12-14 10:08:30 +0800 CST'>December 14, 2024</span>&nbsp;·&nbsp;505 words&nbsp;·&nbsp;Me</div></header><div class=post-content><h2 id=definition-of-an-empty-class>Definition of an Empty Class<a hidden class=anchor aria-hidden=true href=#definition-of-an-empty-class>#</a></h2><p>An empty class is a class that:</p><ol><li>Contains <strong>no non-static</strong> data members.</li><li>May include:<ul><li><strong>Member functions</strong> (including operator() or constructors), but these do not contribute to the class size.</li><li><strong>Static</strong> data members, because these are shared across all instances and are not part of the object layout.</li></ul></li><li>Does not use <strong>virtual</strong> functions or polymorphism, which would require the inclusion of a vtable pointer.</li><li>Inherits from another empty class, as the derived class can still remain empty due to Empty Base Optimization (EBO).</li></ol><h3 id=code-example-for-empty-class>Code Example for Empty Class<a hidden class=anchor aria-hidden=true href=#code-example-for-empty-class>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Empty</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>StillEmpty</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>int</span> <span class=n>counter</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>void</span> <span class=nf>func</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>DerivedFromEmpty</span> <span class=o>:</span> <span class=n>Empty</span> <span class=p>{};</span>
</span></span></code></pre></div><h3 id=code-example-for-non-empty-class>Code Example for Non-Empty Class<a hidden class=anchor aria-hidden=true href=#code-example-for-non-empty-class>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=k>struct</span> <span class=nc>NonEmptyWithData</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>NonEmptyWithVirtualFunction</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>func</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>NonEmptyWithBase</span> <span class=o>:</span> <span class=n>Base</span> <span class=p>{};</span>
</span></span></code></pre></div><h2 id=size-of-empty-struct>Size of Empty Struct<a hidden class=anchor aria-hidden=true href=#size-of-empty-struct>#</a></h2><p>In C++, an empty struct has a size of 1 byte. This is due to the C++ standard requirement that no two distinct objects can have the same memory address, so even empty structures must have a non-zero size.</p><p>The minimum addressable unit in most computer architectures is 1 byte
So while it might seem logical to make it 0 bytes since it contains no data, that would violate the requirement that objects must have unique addresses. And while 4 bytes would work, 1 byte is sufficient to satisfy the unique address requirement while minimizing wasted space.</p><h2 id=empty-base-optimization>Empty Base Optimization<a hidden class=anchor aria-hidden=true href=#empty-base-optimization>#</a></h2><ol><li>When an empty struct/class is used as a <strong>base</strong> class, it can be optimized away through Empty Base Optimization (EBO)</li><li>When an empty struct is <strong>part</strong> of another struct/class, it will still contribute to padding and alignment</li></ol><h3 id=code-example>Code Example<a hidden class=anchor aria-hidden=true href=#code-example>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-C++ data-lang=C++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Empty</span> <span class=p>{};</span> <span class=c1>// size: 1 byte
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Empty Base Optimization
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=nc>DerivedFromEmpty</span> <span class=o>:</span> <span class=n>Empty</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span> <span class=c1>// size: 4 bytes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span> <span class=c1>// sizeof(DerivedFromEmpty) == sizeof(int)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// No EBO - empty struct as member
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=nc>ContainsEmpty</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Empty</span> <span class=n>e</span><span class=p>;</span> <span class=c1>// size: 1 byte
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span> <span class=c1>// size: 4 bytes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span> <span class=c1>// total size: 8 bytes
</span></span></span><span class=line><span class=cl><span class=c1>// | e | pad pad pad | x x x x |
</span></span></span><span class=line><span class=cl><span class=c1>// ^   ^             ^
</span></span></span><span class=line><span class=cl><span class=c1>// byte 0            byte 4    
</span></span></span><span class=line><span class=cl><span class=c1>// 1 byte            4 bytes   
</span></span></span><span class=line><span class=cl><span class=c1>// + 3 bytes padding
</span></span></span><span class=line><span class=cl><span class=c1>// = 8 bytes total
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Size of Empty: &#34;</span> <span class=o>&lt;&lt;</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Empty</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>              <span class=c1>// 1 byte
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Size of DerivedFromEmpty: &#34;</span> <span class=o>&lt;&lt;</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>DerivedFromEmpty</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>  <span class=c1>// 4 bytes
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Size of ContainsEmpty: &#34;</span> <span class=o>&lt;&lt;</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>ContainsEmpty</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>        <span class=c1>// 8 bytes
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>It turns out that I have extensively used empty structs in my codebase, such as tags (e.g., <code>host</code>, <code>device</code>), functors (and lambdas) with no captures. These are termed as <strong>stateless types</strong> in the C++ standard to emphasize the functional behaviors, broader applications, and modern semantics. Notice that <code>empty struct</code> and <code>stateless type</code> are not strictly interchangeable, but in many cases, the <code>stateless type</code> is an empty struct that can be optimized with EBO. A separate post is dedicated to <a href=https://yuang-chen.github.io/posts/2024-12-20-stateless-type/>stateless types</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://yuang-chen.github.io/tags/c++/>C++</a></li><li><a href=https://yuang-chen.github.io/tags/alignment/>Alignment</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://yuang-chen.github.io/>Yac's Log</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>